<!-- _cart_sidebar.html.erb -->

<% @products ||= local_assigns[:products] %>

<div data-cart-target="sidebar"
     class="cart-sidebar d-none"
     style="position: fixed; top: 0; right: 0; width: 320px; height: 100vh; background: white; box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2); z-index: 1050; overflow-y: auto; transition: transform 0.3s ease-in-out; transform: translateX(100%);">

  <div class="d-flex justify-content-between align-items-center p-3 border-bottom">
    <h5 class="mb-0">Shopping Cart</h5>
    <button class="btn btn-sm" data-action="click->cart#close">âœ•</button>
  </div>

  <div class="p-3">
    <% if @products.present? %>
      <% @products.each do |product| %>
        <div class="d-flex justify-content-between mb-2">
          <span><%= product.name %></span>
          <span><%= number_to_currency(product.price) %></span>
        </div>
      <% end %>
      <div class="mt-4">
        <strong>Product x <%= @products.count %></strong>
        <%= link_to "Checkout", "#", class: "btn btn-dark w-100 mt-2" %>
      </div>
    <% else %>
      <p>Your cart is empty.</p>
    <% end %>
  </div>
</div>
